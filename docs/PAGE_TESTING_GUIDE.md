# 📋 페이지별 기능 테스트 가이드

**목적**: 각 페이지의 기능을 체계적으로 테스트하기 위한 가이드  
**버전**: 1.0  
**작성일**: 2025.12.21

---

## 📌 테스트 환경 설정

### 사전 요구사항
```bash
# 1. 개발 서버 실행
pnpm api:dev          # 터미널 1: API (포트 3000)
pnpm web:dev          # 터미널 2: 웹앱 (포트 4200)

# 2. 테스트 데이터 로드
pnpm db:seed

# 3. 로그인 정보
테스트 계정: test@example.com / password123
```

### 브라우저 개발자도구 설정
```bash
# Network 탭
- Offline 시뮬레이션 테스트
- API 응답 확인

# Application 탭
- LocalStorage 확인
- IndexedDB (offline_queue) 확인
- Service Worker 상태 확인

# Console 탭
- 에러 메시지 확인
- 성능 로그 확인
```

---

## 🔐 1. Login 페이지

### 위치
`apps/web/src/app/auth/pages/login/login.page.ts`

### 테스트 시나리오

#### 1.1 정상 로그인
```
1. http://localhost:4200/auth/login 접속
2. 이메일 입력: test@example.com
3. 비밀번호 입력: password123
4. "로그인" 버튼 클릭
5. 기대 결과:
   ✓ Dashboard 페이지로 리다이렉트
   ✓ JWT 토큰이 localStorage에 저장
   ✓ 사용자 정보가 Store에 저장
```

#### 1.2 잘못된 비밀번호
```
1. 이메일: test@example.com
2. 비밀번호: wrongpassword
3. 로그인 시도
4. 기대 결과:
   ✓ 에러 메시지 표시: "잘못된 비밀번호"
   ✓ 페이지 이동 없음
   ✓ 입력 필드 포커스 유지
```

#### 1.3 존재하지 않는 사용자
```
1. 이메일: nonexistent@example.com
2. 로그인 시도
3. 기대 결과:
   ✓ 에러 메시지: "사용자를 찾을 수 없습니다"
```

#### 1.4 공란 필드
```
1. 이메일 또는 비밀번호 공란 두고 로그인 시도
2. 기대 결과:
   ✓ 유효성 검사 에러 메시지
   ✓ 제출 버튼 비활성화
```

#### 1.5 오프라인 상태 로그인
```
1. 개발자도구 → Network → Offline 체크
2. 로그인 시도
3. 기대 결과:
   ✓ 오프라인 알림 표시
   ✓ 오프라인 큐에 요청 저장
```

### 수동 테스트 체크리스트
- [ ] 유효한 자격증명으로 로그인 성공
- [ ] 잘못된 비밀번호 거부
- [ ] 존재하지 않는 사용자 거부
- [ ] 필수 필드 검증
- [ ] 오프라인 모드 처리
- [ ] "비밀번호 찾기" 링크 동작
- [ ] 회원가입 링크 동작

---

## 📊 2. Dashboard 페이지

### 위치
`apps/web/src/app/features/dashboard/pages/dashboard.page.ts`

### 테스트 시나리오

#### 2.1 초기 로드
```
1. 로그인 후 자동으로 Dashboard 로드
2. 기대 결과:
   ✓ 통계 카드 로드 (주문수, 배정수, 완료수)
   ✓ 최근 주문 목록 표시
   ✓ 성능 그래프 표시
```

#### 2.2 통계 데이터 업데이트
```
1. 새로운 주문 생성 (API 호출 또는 다른 탭)
2. Dashboard 새로고침 (F5)
3. 기대 결과:
   ✓ 통계 데이터 업데이트됨
   ✓ 최근 주문 목록에 새 주문 추가됨
```

#### 2.3 필터링 기능
```
1. "기간" 필터: 이번 주 선택
2. "상태" 필터: "배정됨" 선택
3. 기대 결과:
   ✓ 통계가 필터에 따라 변경
   ✓ 그래프 데이터 업데이트
```

#### 2.4 실시간 알림
```
1. 다른 사용자가 새 주문 생성
2. Dashboard에서 기대 결과:
   ✓ 푸시 알림 수신
   ✓ 통계 자동 업데이트
   ✓ 배지 아이콘 업데이트
```

### 수동 테스트 체크리스트
- [ ] 모든 통계 카드 로드 및 표시
- [ ] 필터링 기능 동작
- [ ] 데이터 새로고침 작동
- [ ] 실시간 알림 수신
- [ ] 그래프 렌더링 성능
- [ ] 반응형 레이아웃 (모바일/태블릿)

---

## 📋 3. Order List 페이지

### 위치
`apps/web/src/app/features/orders/pages/order-list/order-list.page.ts`

### 테스트 시나리오

#### 3.1 목록 로드 및 표시
```
1. 페이지 접속: /orders
2. 기대 결과:
   ✓ 주문 목록 로드 (20개 기본)
   ✓ 각 주문 행에 정보 표시 (ID, 고객, 상태, 날짜)
   ✓ 스크롤바 표시 (Virtual Scrolling)
```

#### 3.2 Virtual Scrolling (1000+ 항목)
```
1. 네트워크 탭에서 API 응답 조정 (1000개 주문)
2. 목록 스크롤
3. 기대 결과:
   ✓ 부드러운 스크롤 (60fps)
   ✓ 메모리 사용 낮음 (<50MB)
   ✓ DOM 노드 최소 (50-80개만)
```

#### 3.3 검색 기능
```
1. 검색창에 "고객명" 입력
2. 검색 버튼 클릭
3. 기대 결과:
   ✓ 일치하는 주문만 필터링
   ✓ 검색 결과 수 표시
```

#### 3.4 필터링
```
1. 상태 필터: "배정됨" 선택
2. 날짜 필터: 지난 7일
3. 기대 결과:
   ✓ 필터에 맞는 주문만 표시
   ✓ 필터 조합 가능
```

#### 3.5 정렬
```
1. 헤더 "날짜" 클릭
2. 다시 클릭 (역순)
3. 기대 결과:
   ✓ 오름차순 정렬
   ✓ 내림차순 정렬
```

#### 3.6 페이지네이션
```
1. "다음" 버튼 클릭
2. 기대 결과:
   ✓ 다음 20개 주문 로드
   ✓ "이전" 버튼 활성화
```

### 수동 테스트 체크리스트
- [ ] 목록 초기 로드
- [ ] Virtual Scrolling 성능 (부드러움, 메모리)
- [ ] 검색 기능 정확성
- [ ] 필터링 조합
- [ ] 정렬 기능
- [ ] 페이지네이션
- [ ] 오프라인 상태에서 캐시 표시

---

## 🔍 4. Order Detail 페이지 (파일 첨부)

### 위치
`apps/web/src/app/features/orders/pages/order-detail/order-detail.page.ts`

### 테스트 시나리오

#### 4.1 주문 상세 정보 로드
```
1. 주문 목록에서 주문 클릭
2. URL: /orders/:id
3. 기대 결과:
   ✓ 주문 상세 정보 로드
   ✓ 모든 필드 표시 (고객, 주소, 상태, 메모)
   ✓ 수정 버튼 표시
```

#### 4.2 메모 수정
```
1. "메모" 필드 클릭
2. 텍스트 입력
3. "저장" 버튼 클릭
4. 기대 결과:
   ✓ API 호출
   ✓ 성공 메시지 표시
   ✓ 메모 업데이트됨
```

#### 4.3 파일 첨부 - 카메라 📸
```
1. "카메라" 버튼 클릭
2. Capacitor Camera 권한 요청
3. 사진 촬영 및 확인
4. 기대 결과:
   ✓ 카메라 앱 열림
   ✓ 썸네일 미리보기 표시
   ✓ 파일명 표시 (IMG_20251221_000000.jpg)
   ✓ 파일 크기 표시
```

#### 4.4 파일 첨부 - 스캔 📄
```
1. "스캔" 버튼 클릭
2. DocumentScanner 권한 요청
3. 문서 스캔
4. 기대 결과:
   ✓ 스캐너 앱 열림
   ✓ 스캔 이미지 미리보기
   ✓ PDF로 저장 옵션
```

#### 4.5 파일 첨부 - 갤러리 🖼️
```
1. "갤러리" 버튼 클릭
2. 기존 사진 선택
3. 기대 결과:
   ✓ 사진 갤러리 열림
   ✓ 미리보기 표시
   ✓ 여러 선택 가능
```

#### 4.6 이미지 자동 압축
```
1. 5MB 이미지 업로드
2. 기대 결과:
   ✓ 이미지 자동 압축 (Canvas API)
   ✓ 크기 89.6% 감소 (5MB → 520KB)
   ✓ WebP 포맷 변환
   ✓ 품질 70% 유지
   ✓ 압축 진행률 표시
```

#### 4.7 파일 업로드
```
1. 파일 선택 후 "업로드" 버튼 클릭
2. 기대 결과:
   ✓ 업로드 진행률 바 표시
   ✓ "업로드 중..." 메시지
   ✓ 완료 후 목록에 추가
```

#### 4.8 파일 목록 표시
```
1. 업로드된 파일들 표시
2. 기대 결과:
   ✓ 파일명, 크기, 날짜 표시
   ✓ 이미지 썸네일 미리보기
   ✓ 삭제 버튼 표시
```

#### 4.9 파일 다운로드
```
1. 파일 행의 다운로드 아이콘 클릭
2. 기대 결과:
   ✓ 파일 다운로드 시작
   ✓ 진행률 표시
   ✓ 저장 위치 선택 (모바일)
```

#### 4.10 파일 삭제
```
1. 파일 행의 삭제 아이콘 클릭
2. 확인 대화상자 표시
3. "삭제" 버튼 클릭
4. 기대 결과:
   ✓ 삭제 확인 대화상자
   ✓ 파일 삭제됨
   ✓ 성공 메시지 표시
   ✓ 목록에서 제거됨
```

#### 4.11 오프라인 파일 첨부
```
1. 개발자도구 → Offline 활성화
2. 파일 첨부 시도
3. 기대 결과:
   ✓ 파일이 IndexedDB offline_queue에 저장
   ✓ "오프라인 - 온라인 복귀 시 업로드" 메시지
   ✓ 온라인 복귀 시 자동 업로드
```

### 수동 테스트 체크리스트
- [ ] 주문 상세 정보 로드
- [ ] 메모 편집 및 저장
- [ ] 카메라 파일 첨부
- [ ] 문서 스캔 첨부
- [ ] 갤러리 선택 첨부
- [ ] 이미지 자동 압축 (89.6%)
- [ ] 파일 업로드 진행률
- [ ] 파일 목록 표시
- [ ] 파일 다운로드
- [ ] 파일 삭제
- [ ] 오프라인 모드 첨부
- [ ] Base64 인코딩 확인 (개발자도구)

---

## 📍 5. Assignment List & Detail 페이지

### 위치
`apps/web/src/app/features/assignments/pages/`

### 테스트 시나리오

#### 5.1 배정 목록 로드
```
1. /assignments 접속
2. 기대 결과:
   ✓ 배정 목록 표시
   ✓ 기사 정보 표시 (이름, 연락처)
   ✓ 할당된 주문 수 표시
   ✓ 상태 배지 표시
```

#### 5.2 배정 상세 정보
```
1. 배정 항목 클릭
2. 기대 결과:
   ✓ 기사 정보 상세 표시
   ✓ 할당된 주문 목록 표시
   ✓ 배정 상태 변경 버튼
```

#### 5.3 배정 상태 변경
```
1. 상태 "배정됨" → "확인됨" 변경
2. 기대 결과:
   ✓ 상태 머신 검증 (규칙에 따라)
   ✓ 성공/실패 메시지
   ✓ 상태 업데이트
```

#### 5.4 배정 취소
```
1. "배정 취소" 버튼 클릭
2. 확인 대화상자 표시
3. 기대 결과:
   ✓ 배정 취소됨
   ✓ 주문이 "미배정" 상태로 변경
   ✓ 기사 알림 발송
```

### 수동 테스트 체크리스트
- [ ] 배정 목록 로드
- [ ] 배정 상세 정보
- [ ] 상태 변경 (상태 머신 규칙)
- [ ] 배정 취소
- [ ] 기사별 필터링

---

## ✅ 6. Completion List & Detail 페이지

### 위치
`apps/web/src/app/features/completion/pages/`

### 테스트 시나리오

#### 6.1 완료 목록
```
1. /completion 접속
2. 기대 결과:
   ✓ 완료된 주문 목록
   ✓ 완료 시간 표시
   ✓ 기사명 표시
```

#### 6.2 완료 상세 정보
```
1. 완료 항목 클릭
2. 기대 결과:
   ✓ 주문 정보 표시
   ✓ 완료 사진 표시
   ✓ 서명 이미지 표시
```

#### 6.3 서명 캡처
```
1. "서명" 섹션의 캔버스 클릭
2. 마우스/터치로 서명
3. "저장" 버튼 클릭
4. 기대 결과:
   ✓ 캔버스에 서명 그려짐
   ✓ PNG 이미지로 저장
   ✓ 미리보기 표시
```

#### 6.4 사진 촬영
```
1. "사진 촬영" 버튼 클릭
2. 기대 결과:
   ✓ Capacitor Camera 열림
   ✓ 사진 촬영
   ✓ 자동 압축 및 업로드
```

#### 6.5 리포트 생성
```
1. "완료 리포트" 버튼 클릭
2. 기대 결과:
   ✓ PDF 생성 또는 이메일 발송
   ✓ 리포트 다운로드
```

### 수동 테스트 체크리스트
- [ ] 완료 목록 로드
- [ ] 완료 상세 정보
- [ ] 서명 캡처 및 저장
- [ ] 사진 촬영 및 업로드
- [ ] 리포트 생성
- [ ] 오프라인 모드 처리

---

## 📊 7. Report 페이지들 (4개)

### 위치
`apps/web/src/app/features/reports/pages/`

### Daily Report
```
1. /reports/daily 접속
2. 기대 결과:
   ✓ 오늘의 통계 표시
   ✓ 배정수, 완료수, 취소수
   ✓ 차트 표시
   ✓ 내보내기 버튼
```

### Performance Report
```
1. /reports/performance 접속
2. 기대 결과:
   ✓ 기사별 성능 지표
   ✓ 완료율, 평균 시간
   ✓ 순위 차트
```

### Route Efficiency
```
1. /reports/route-efficiency 접속
2. 기대 결과:
   ✓ 배송 경로 맵 표시
   ✓ 최적화 제안
   ✓ 거리, 시간 표시
```

### Export Analytics
```
1. /reports/export 접속
2. 기대 결과:
   ✓ 데이터 내보내기 옵션
   ✓ CSV, Excel, PDF 형식
   ✓ 다운로드
```

### 수동 테스트 체크리스트
- [ ] 모든 리포트 페이지 로드
- [ ] 데이터 정확성
- [ ] 차트 렌더링
- [ ] 필터링 기능
- [ ] 데이터 내보내기

---

## ⚙️ 8. Settings 페이지들 (4개)

### User Profile
```
1. /settings/profile 접속
2. 기대 결과:
   ✓ 사용자 정보 표시
   ✓ 프로필 수정 가능
   ✓ 비밀번호 변경
   ✓ 프로필 사진 업로드
```

### System Settings (관리자 전용)
```
1. /settings/system 접속 (관리자 권한 필요)
2. 기대 결과:
   ✓ 시스템 설정 표시
   ✓ API 타임아웃 설정
   ✓ 로깅 레벨 설정
   ✓ 캐시 설정
   ✓ 저장 버튼 동작
```

### Customer Contact
```
1. /settings/customer-contact 접속
2. 기대 결과:
   ✓ 고객 목록 표시
   ✓ 고객 추가/수정/삭제 가능
   ✓ 연락처 정보 관리
   ✓ 검색 기능
```

### Notification Preferences
```
1. /settings/notifications 접속
2. 기대 결과:
   ✓ 알림 설정 표시
   ✓ 토글 스위치로 활성화/비활성화
   ✓ 푸시 알림 권한 요청
   ✓ 설정 자동 저장
```

### 수동 테스트 체크리스트
- [ ] 프로필 정보 수정
- [ ] 비밀번호 변경
- [ ] 프로필 사진 업로드
- [ ] 시스템 설정 (관리자)
- [ ] 고객 CRUD
- [ ] 알림 설정
- [ ] 권한 확인 (Role-based)

---

## 🔄 오프라인/동기화 테스트

### 공통 시나리오

#### 오프라인 작업
```
1. 개발자도구 → Network → Offline
2. 주문 수정 또는 배정 변경
3. 기대 결과:
   ✓ IndexedDB offline_queue에 저장
   ✓ "오프라인 모드" 표시
   ✓ 로컬에서 상태 업데이트
```

#### 온라인 복귀
```
1. 개발자도구 → Network → Online
2. 기대 결과:
   ✓ Background Sync 자동 실행
   ✓ offline_queue의 데이터 API에 전송
   ✓ 서버와 동기화 완료
   ✓ "동기화 완료" 메시지
```

#### 충돌 처리
```
1. 오프라인: 주문 상태 "배정됨" → "확인됨"
2. 동시에 다른 사용자: 주문 상태 "배정됨" → "취소됨"
3. 온라인 복귀
4. 기대 결과:
   ✓ 409 Conflict 감지
   ✓ 사용자에게 선택지 제시
   ✓ 수동 병합 UI 표시
   ✓ audit_logs에 기록
```

---

## 🌐 브라우저 호환성 테스트

### 테스트할 브라우저
- [ ] Chrome (최신)
- [ ] Safari (최신)
- [ ] Firefox (최신)
- [ ] Edge (최신)

### 모바일 테스트
- [ ] iOS Safari
- [ ] Android Chrome
- [ ] Samsung Internet

---

## 📱 반응형 디자인 테스트

### 뷰포트 크기
```bash
# Desktop
1920x1080  - Full HD
1440x900   - 표준 데스크톱

# Tablet
768x1024   - iPad
600x800    - Android Tablet

# Mobile
375x667    - iPhone SE
390x844    - iPhone 14
412x915    - Android
```

### 테스트 항목
- [ ] 레이아웃 깨짐 없음
- [ ] 텍스트 가독성
- [ ] 버튼 크기 (터치 친화)
- [ ] 이미지 스케일링
- [ ] 스크롤 성능

---

## ⚡ 성능 테스트

### Lighthouse 점수 확인
```bash
# Chrome 개발자도구 → Lighthouse
pnpm run lighthouse

# 기대 점수:
Performance: 90+
Accessibility: 90+
Best Practices: 90+
SEO: 90+
```

### 로드 시간 측정
```
FCP (First Contentful Paint): <2.5s
LCP (Largest Contentful Paint): <2.5s
TTI (Time to Interactive): <3.5s
CLS (Cumulative Layout Shift): <0.1
```

---

## 🔒 보안 테스트

### XSS 방지 확인
```
1. 주문 메모에 <script>alert('xss')</script> 입력
2. 기대 결과:
   ✓ 스크립트 실행 안 됨
   ✓ 텍스트로 표시됨
```

### CSRF 방지 확인
```
1. API 요청이 CSRF 토큰 포함
2. 개발자도구 → Network → 요청 확인
3. 기대 결과:
   ✓ X-CSRF-Token 헤더 존재
```

### 인증 확인
```
1. localStorage에서 토큰 삭제
2. 페이지 새로고침
3. 기대 결과:
   ✓ 로그인 페이지로 리다이렉트
```

---

## 📝 테스트 결과 기록

### 테스트 수행 후 작성

```markdown
## 테스트 실행 날짜: YYYY-MM-DD

### Login 페이지
- [x] 정상 로그인: 성공
- [x] 잘못된 비밀번호: 성공
- [x] 오프라인 모드: 성공
- [결과] ✅ 모두 통과

### Dashboard 페이지
- [x] 초기 로드: 성공
- [x] 필터링: 성공
- [결과] ✅ 모두 통과

...
```

---

## 🎯 테스트 체크리스트 (전체)

### 필수 테스트
- [ ] Login 페이지 (5개 시나리오)
- [ ] Dashboard 페이지 (4개 시나리오)
- [ ] Order List 페이지 (6개 시나리오)
- [ ] Order Detail 페이지 (11개 시나리오)
- [ ] Assignment 페이지 (4개 시나리오)
- [ ] Completion 페이지 (5개 시나리오)
- [ ] Report 페이지 (4개)
- [ ] Settings 페이지 (4개)

### 통합 테스트
- [ ] 오프라인 → 온라인 동기화
- [ ] 충돌 처리
- [ ] 권한 검증

### 성능 테스트
- [ ] Lighthouse 90+
- [ ] Core Web Vitals Green
- [ ] Virtual Scrolling 성능

### 호환성 테스트
- [ ] 모든 브라우저
- [ ] 모든 모바일 디바이스
- [ ] 반응형 디자인

### 보안 테스트
- [ ] XSS 방지
- [ ] CSRF 방지
- [ ] 인증 검증

---

## 📞 문제 보고

테스트 중 문제 발견 시:

```markdown
### 버그 제목
[페이지명] 기능 설명

### 재현 단계
1. ...
2. ...

### 기대 동작
...

### 실제 동작
...

### 환경
- 브라우저: Chrome 120
- 플랫폼: macOS
- 버전: v1.0.0
```

---

**작성자**: 자동 생성  
**버전**: 1.0  
**마지막 업데이트**: 2025.12.21
